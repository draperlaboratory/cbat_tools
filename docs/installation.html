<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="cbat.css">
<title>CBAT Installation</title>
</head>
<body>

<h1>CBAT Installation</h1>

<section>

<p>Table of contents:

<ul>
  <li><a href="#docker">Docker Installation</a></li>
  <li><a href="#manual">Manual Installation</a></li>
</ul>
</section>

<section>

<a name="docker"></a>
<h2>Docker Installation</h2>

<p>The Dockerfile for CBAT can be found in <a href="https://github.com/draperlaboratory/cbat_tools/tree/master">this directory</a>.

<p>To build the image:

<pre>
  docker build --tag cbat .
</pre>

<p>To run the container:

<pre>
  docker run -it cbat bash
</pre>

</section>

<section>

<a name="manual"></a>
<h2>Manual Installation</h2>

<h3>Prerequisites</h3>

<p>Before installing, make sure you have the appropriate dependencies installed. First, there is OCaml:

<ul>
  <li>ocaml &ge; 4.08.0 &amp; &lt; 4.11.0</li>
</ul>

<p>The recommended way to install Ocaml is with OPAM. Instructions on downloading OPAM, and using OPAM to download Ocaml can be found <a href="https://ocaml.org/docs/install.html#OPAM">here</a>.

<p>The following dependencies are needed to install Z3:

<ul>
  <li>gcc-8</li>
  <li>g++-8</li>
  <li>libgmp-dev</li>
  <li>python2.7</li>
  <li>m4</li>
</ul>

<p>You can install the latest Z3 Ocaml bindings from the dev repo with:

<pre>
  opam pin add z3 --dev-repo
</pre>

<p>If you want to install the most recent stable release of Z3 from OPAM instead, you can run:

<pre>
  opam install z3
</pre>

<p>Next, there is the alpha release of BAP:

<ul>
  <li>bap 2.2.0-alpha</li>
</ul>

<p>Instructions on downloading BAP from the testing repository can be found <a href="https://github.com/BinaryAnalysisPlatform/bap#installation">here</a>.

<p>Then, there are the following OCaml packages:

<ul>
  <li>core_kernel 0.14.0</li>
  <li>ounit2 2.2.3</li>
  <li>re 1.9.0</li>
  <li>dune 2.7.1</li>
</ul>

<p>All of these can be installed with:

<pre>
  opam install core_kernel ounit2 re dune
</pre>

Optionally, you may install Boolector 3.2.1 from <a href="https://github.com/boolector/boolector">here</a> to use with the <code>--ext-solver-path</code> option. For some queries, Boolector may be more performant than the standard Z3.

<h3>Installing CBAT</h3>

<p>Then, to build and install the weakest precondition tools, simply run <code>make</code> in <a href="https://github.com/draperlaboratory/cbat_tools/tree/master/wp">this directory</a>:

<pre>
  make
</pre>

<p>To uninstall and clean:

<pre>
  make clean
</pre>

<p>To run oUnit unit tests:

<pre>
  make test
</pre>

<p>To run oUnit integration tests:

<pre>
  make test.plugin.integration
</pre>

<p>To run oUnit tests with colored output, before running the above test commands, run

<pre>
  export OUNIT_CI=true
</pre>

</section>

</body>
</html>
