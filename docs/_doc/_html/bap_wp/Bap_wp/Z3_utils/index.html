<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Z3_utils (bap_wp.Bap_wp.Z3_utils)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">bap_wp</a> &#x00BB; <a href="../index.html">Bap_wp</a> &#x00BB; Z3_utils</nav><h1>Module <code>Bap_wp.Z3_utils</code></h1></header><aside><p>This module exports utility functions for working with Z3. Unfortunately, the module hierarchy necessitates thats some things that might naturally be placed in here have to put elsewhere, in particular any functionality required by <code>Constr</code> or <code>Env</code>.</p></aside><div class="spec module" id="module-Env"><a href="#module-Env" class="anchor"></a><code><span class="keyword">module</span> Env = <a href="../index.html#module-Environment">Environment</a></code></div><div class="spec module" id="module-Constr"><a href="#module-Constr" class="anchor"></a><code><span class="keyword">module</span> Constr = <a href="../index.html#module-Constraint">Constraint</a></code></div><dl><dt class="spec value" id="val-tokenize"><a href="#val-tokenize" class="anchor"></a><code><span class="keyword">val</span> tokenize : string <span>&#45;&gt;</span> <span>string list</span></code></dt><dd><p>Splits up an smtlib2 string into a list of tokens that can be parsed.</p></dd></dl><dl><dt class="spec value" id="val-build_str"><a href="#val-build_str" class="anchor"></a><code><span class="keyword">val</span> build_str : <span>string list</span> <span>&#45;&gt;</span> string</code></dt><dd><p>Builds up an smtlib2 string from a list of tokens.</p></dd></dl><dl><dt class="spec value" id="val-get_z3_name"><a href="#val-get_z3_name" class="anchor"></a><code><span class="keyword">val</span> get_z3_name : <span><a href="../Constraint/index.html#type-z3_expr">Constr.z3_expr</a> Bap.Std.Var.Map.t</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>(Bap.Std.Var.t <span>&#45;&gt;</span> string)</span> <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p>Looks up a Z3 variable's name in the map based off of the name in BIL notation. <code>fmt</code> is used to add prefixes and suffixes to a variable name. For example, init_RDI_orig.</p></dd></dl><dl><dt class="spec value" id="val-get_decls_and_symbols"><a href="#val-get_decls_and_symbols" class="anchor"></a><code><span class="keyword">val</span> get_decls_and_symbols : <a href="../Environment/index.html#type-t">Env.t</a> <span>&#45;&gt;</span> <span><span>(Z3.FuncDecl.func_decl * Z3.Symbol.symbol)</span> list</span></code></dt><dd><p><code>get_decls_and_symbols</code> builds from a the var_map in an environment a mapping of all Z3 func_decl to their symbol. This is a helper function for <code>mk_smtlib2</code></p></dd></dl><dl><dt class="spec value" id="val-mk_smtlib2_single"><a href="#val-mk_smtlib2_single" class="anchor"></a><code><span class="keyword">val</span> mk_smtlib2_single : <a href="../Environment/index.html#type-t">Env.t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <a href="../Constraint/index.html#type-t">Constr.t</a></code></dt><dd><p><code>mk_smtlib2_single env smtlib_str</code> takes in a string representing a valid SMT-Lib-2 statement. The variables in the SMT-Lib statements need to appear in the environment. The intended purpose of this function is generating hypothesis and postconditions for single binary analysis</p></dd></dl><aside><p><code>mk_smtlib2</code> parses a smtlib2 string in the context that has a mapping of func_decl to symbols and returns a constraint <code>Constr.t</code> corresponding to the smtlib2 string. The <code>func_decl * symbol</code> mapping can be constructed from an <code>Env.t</code> using the <code>get_decls_and_symbols</code> function.</p></aside><dl><dt class="spec value" id="val-mk_smtlib2"><a href="#val-mk_smtlib2" class="anchor"></a><code><span class="keyword">val</span> mk_smtlib2 : Z3.context <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>(Z3.FuncDecl.func_decl * Z3.Symbol.symbol)</span> list</span> <span>&#45;&gt;</span> <a href="../Constraint/index.html#type-t">Constr.t</a></code></dt></dl></div></body></html>